<!DOCTYPE html>
<html lang="es-MX">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora Laboral Definitiva - México 2025</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="container">
        <header>
            <h1>Calculadora Laboral Definitiva</h1>
            <p class="subtitle">Basada en la Ley Federal del Trabajo de México (LFT) vigente en 2025</p>
        </header>
        
        <form id="calculator-form">
            <section class="card">
                <h2>1. Fechas Clave</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="fechaIngreso">Fecha de Ingreso</label>
                        <input type="date" id="fechaIngreso" required>
                    </div>
                    <div class="form-group">
                        <label for="fechaBaja">Fecha de Baja</label>
                        <input type="date" id="fechaBaja" required>
                        <small>Por defecto, la fecha de hoy.</small>
                    </div>
                </div>
            </section>

            <section class="card">
                <h2>2. Información Salarial</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="ingresoUltimoMes">Ingreso Bruto Total (Últimos 30 días)</label>
                        <input type="number" id="ingresoUltimoMes" placeholder="Suma tus percepciones brutas" step="0.01">
                        <small>Si tu salario es variable, ingresa aquí la suma bruta de los últimos 30 días trabajados (Art. 89 LFT). Si es fijo o prefieres usar el SDI, deja en blanco.</small>
                    </div>
                    <div class="form-group">
                        <label for="sdiManual">Salario Diario Integrado (SDI) - Opcional</label>
                        <input type="number" id="sdiManual" placeholder="Dejar en blanco para autocalcular" step="0.01">
                        <small>Ingresa tu SDI oficial (viene en tu recibo de nómina) si lo conoces. **Tendrá prioridad** sobre el Ingreso Bruto.</small>
                    </div>
                </div>
                <hr class="section-divider">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="fechaUltimoPago">Fecha de Corte del Último Pago</label>
                        <input type="date" id="fechaUltimoPago" required>
                        <small>Ingresa el último día que cubrió tu pago anterior (Ej: si te pagan la catorcena 1-14, pon el día 14).</small>
                    </div>
                    <div class="form-group">
                        <label>Días Laborales Habituales</label>
                        <div class="checkbox-group">
                            <input type="checkbox" id="dia-1" name="diasTrabajo" value="1" checked><label for="dia-1">L</label>
                            <input type="checkbox" id="dia-2" name="diasTrabajo" value="2" checked><label for="dia-2">M</label>
                            <input type="checkbox" id="dia-3" name="diasTrabajo" value="3" checked><label for="dia-3">M</label>
                            <input type="checkbox" id="dia-4" name="diasTrabajo" value="4" checked><label for="dia-4">J</label>
                            <input type="checkbox" id="dia-5" name="diasTrabajo" value="5" checked><label for="dia-5">V</label>
                            <input type="checkbox" id="dia-6" name="diasTrabajo" value="6"><label for="dia-6">S</label>
                            <input type="checkbox" id="dia-0" name="diasTrabajo" value="0"><label for="dia-0">D</label>
                        </div>
                        <small>Selecciona los días que trabajas normalmente.</small>
                    </div>
                </div>
            </section>
            
            <section class="card">
                <h2>3. Prestaciones y Condiciones</h2>
                <div class="form-grid-three">
                    <div class="form-group">
                        <label for="diasAguinaldo">Días de Aguinaldo al Año</label>
                        <input type="number" id="diasAguinaldo" value="15" min="15" required>
                        <small>Mínimo 15 por ley.</small>
                    </div>
                    <div class="form-group">
                        <label for="saldoVacaciones">Días de Vacaciones Pendientes</label>
                        <input type="number" id="saldoVacaciones" value="0" min="0" required>
                        <small>De años anteriores, sin usar.</small>
                    </div>
                    <div class="form-group">
                        <label for="esZonaFronteriza">Lugar de Trabajo</label>
                        <div class="radio-group">
                            <input type="radio" id="zona-general" name="zona_salarial" value="general" checked>
                            <label for="zona-general">Resto del País</label>
                            <input type="radio" id="zona-frontera" name="zona_salarial" value="frontera">
                            <label for="zona-frontera">Zona Fronteriza Norte</label>
                        </div>
                        <small>Afecta el tope de la Prima de Antigüedad.</small>
                    </div>
                </div>
            </section>

            <section class="card">
                <h2>4. Motivo de la Baja</h2>
                 <div class="form-group">
                    <label for="motivoBaja">Selecciona el escenario que mejor describa tu situación:</label>
                    <select id="motivoBaja" required>
                        <option value="" disabled selected>-- Elige una opción --</option>
                        <optgroup label="Decisión del Trabajador">
                            <option value="renuncia">Renuncia Voluntaria</option>
                            <option value="rescisión_trabajador">Rescisión por Causa del Patrón (Despido Indirecto - Art. 51)</option>
                        </optgroup>
                        <optgroup label="Decisión del Patrón (Empresa)">
                            <option value="despido_injustificado">Despido Injustificado</option>
                            <option value="despido_justificado">Despido Justificado (Insubordinación, Faltas, etc. - Art. 47)</option>
                        </optgroup>
                        <optgroup label="Otras Causas de Terminación">
                             <option value="terminacion_colectiva">Terminación Colectiva (Cierre de Campaña/Empresa - Art. 434)</option>
                            <option value="fin_contrato">Fin de Obra o Contrato por Tiempo Determinado</option>
                            <option value="mutuo_consentimiento">Mutuo Consentimiento</option>
                            <option value="incapacidad_trabajador">Incapacidad (No Profesional) del Trabajador (Art. 53-IV)</option>
                            <option value="muerte_trabajador">Muerte del Trabajador</option>
                        </optgroup>
                    </select>
                </div>
            </section>

            <button type="submit">Calcular Liquidación / Finiquito</button>
        
            <div style="text-align: center; margin-top: 15px;">
                <a href="investigacion.html" target="_blank">Ver la investigación y el fundamento legal de esta herramienta</a>
            </div>
        </form>

        <div id="results-container" class="hidden">
            <header>
                <h2>Desglose Detallado del Cálculo</h2>
                <p id="res-summary-text">Cálculo para una antigüedad de X años, X meses y X días.</p>
            </header>

            <section class="card result-card">
                <h3>A. Pagos Devengados (Finiquito)</h3>
                <div class="result-item">
                    <p>Salarios Devengados (<span id="dias-devengados">X</span> días)</p> <p class="result-amount" id="res-salarios-devengados">$0.00</p>
                </div>
                <details>
                    <summary>Ver Detalle</summary>
                    <div class="detail-box" id="det-salarios-devengados"></div>
                </details>
                
                <div class="result-item">
                    <p>Aguinaldo Proporcional</p>
                    <p class="result-amount" id="res-aguinaldo">$0.00</p>
                </div>
                <details>
                    <summary>Ver Detalle</summary>
                    <div class="detail-box" id="det-aguinaldo"></div>
                </details>

                <div class="result-item">
                    <p>Vacaciones (Saldo + Proporcional)</p>
                    <p class="result-amount" id="res-vacaciones">$0.00</p>
                </div>
                <details>
                    <summary>Ver Detalle</summary>
                    <div class="detail-box" id="det-vacaciones"></div>
                </details>

                <div class="result-item">
                    <p>Prima Vacacional (25%)</p>
                    <p class="result-amount" id="res-prima-vacacional">$0.00</p>
                </div>
                <details>
                    <summary>Ver Detalle</summary>
                    <div class="detail-box" id="det-prima-vacacional"></div>
                </details>
                <hr>
                <div class="result-item subtotal">
                    <p><strong>Subtotal Finiquito (Bruto):</strong></p>
                    <p class="result-amount" id="res-total-finiquito">$0.00</p>
                </div>
            </section>

            <section class="card result-card">
                <h3>B. Indemnizaciones Adicionales (Liquidación)</h3>
                 <div class="result-item">
                    <p>Indemnización Constitucional (3 meses / 1 mes)</p>
                    <p class="result-amount" id="res-indemnizacion">$0.00</p>
                </div>
                <details>
                    <summary>Ver Detalle</summary>
                    <div class="detail-box" id="det-indemnizacion"></div>
                </details>
                
                <div class="result-item">
                    <p>Prima de Antigüedad (12 días por año)</p>
                    <p class="result-amount" id="res-prima-antiguedad">$0.00</p>
                </div>
                <details>
                    <summary>Ver Detalle</summary>
                    <div class="detail-box" id="det-prima-antiguedad"></div>
                </details>

                <div class="result-item">
                    <p>20 Días de Salario por Año</p>
                    <p class="result-amount" id="res-20-dias">$0.00</p>
                </div>
                <details>
                    <summary>Ver Detalle</summary>
                    <div class="detail-box" id="det-20-dias"></div>
                </details>
                <hr>
                 <div class="result-item subtotal">
                    <p><strong>Subtotal Liquidación (Bruto):</strong></p>
                    <p class="result-amount" id="res-total-liquidacion">$0.00</p>
                </div>
            </section>
            
            <section id="isr-details-container" class="card result-card hidden">
                 <h3>C. Cálculo Estimado del ISR a Retener</h3>
                 <div id="isr-details-content">
                     </div>
                 <hr>
                 <div class="result-item subtotal">
                     <p><strong>ISR Total Estimado:</strong></p>
                     <p class="result-amount" id="res-isr-total">$0.00</p>
                 </div>
            </section>

            <div class="total-box">
                <h2>Resumen Final Estimado</h2>
                <div class="total-summary">
                    <p>Pago Total Bruto:</p>
                    <p class="total-amount bruto" id="res-total-bruto">$0.00 MXN</p>
                </div>
                 <div class="total-summary">
                    <p>ISR Retenido Estimado:</p>
                    <p class="total-amount isr" id="res-isr-retenido-final">$0.00 MXN</p>
                </div>
                 <div class="total-summary net">
                    <p>Pago Neto Estimado (En mano):</p>
                    <p class="total-amount neto" id="res-total-neto">$0.00 MXN</p>
                </div>

                <div class="download-buttons-container">
                    <button type="button" id="download-json-simple" class="download-button" style="display: none;">JSON (Simple)</button>
                    <button type="button" id="download-json-detailed" class="download-button" style="display: none;">JSON (Detallado)</button>
                    <button type="button" id="download-pdf-simple" class="download-button pdf-button" style="display: none;">PDF (Simple)</button>
                    <button type="button" id="download-pdf-detailed" class="download-button pdf-button" style="display: none;">PDF (Detallado)</button>
                 </div>
            </div>
            
            <p class="disclaimer">
                </p>
        </div> </div> <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js"></script>
</body>
</html>